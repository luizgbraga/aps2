import { RefObject, useEffect, useState } from 'react';
import { mapController } from './mapController';

export const useMap = (ref: RefObject<HTMLDivElement | null>) => {
  const paths = [
    [
      { lat: -22.87638, lng: -43.46371 },
      { lat: -22.87553, lng: -43.46372 },
      { lat: -22.87556, lng: -43.46543 },
      { lat: -22.87567, lng: -43.46973 },
      { lat: -22.8757, lng: -43.47027 },
      { lat: -22.87582, lng: -43.47096 },
      { lat: -22.87587, lng: -43.47362 },
      { lat: -22.87539, lng: -43.47363 },
      { lat: -22.87533, lng: -43.47088 },
      { lat: -22.8753, lng: -43.46908 },
      { lat: -22.87529, lng: -43.4686 },
      { lat: -22.87526, lng: -43.46843 },
      { lat: -22.8752, lng: -43.46829 },
      { lat: -22.87514, lng: -43.4682 },
      { lat: -22.87511, lng: -43.46811 },
      { lat: -22.87511, lng: -43.46652 },
      { lat: -22.8751, lng: -43.46559 },
      { lat: -22.87507, lng: -43.46371 },
      { lat: -22.87447, lng: -43.46371 },
      { lat: -22.87348, lng: -43.46373 },
      { lat: -22.87349, lng: -43.46493 },
      { lat: -22.87292, lng: -43.46493 },
      { lat: -22.87045, lng: -43.46497 },
      { lat: -22.86731, lng: -43.46501 },
      { lat: -22.86532, lng: -43.46505 },
      { lat: -22.8653, lng: -43.4643 },
      { lat: -22.86525, lng: -43.46384 },
      { lat: -22.86516, lng: -43.4637 },
      { lat: -22.86504, lng: -43.46357 },
      { lat: -22.865, lng: -43.46353 },
      { lat: -22.86466, lng: -43.46328 },
      { lat: -22.86349, lng: -43.46248 },
      { lat: -22.8627, lng: -43.46194 },
      { lat: -22.86252, lng: -43.46178 },
      { lat: -22.86246, lng: -43.4617 },
      { lat: -22.86218, lng: -43.46126 },
      { lat: -22.86203, lng: -43.46082 },
      { lat: -22.862, lng: -43.46032 },
      { lat: -22.862, lng: -43.46033 },
      { lat: -22.86199, lng: -43.45984 },
      { lat: -22.86202, lng: -43.45941 },
      { lat: -22.86222, lng: -43.45729 },
      { lat: -22.862221, lng: -43.457285 },
      { lat: -22.86235, lng: -43.456249 },
      { lat: -22.86237, lng: -43.45593 },
      { lat: -22.86236, lng: -43.45549 },
      { lat: -22.86232, lng: -43.4542 },
      { lat: -22.86227, lng: -43.45334 },
      { lat: -22.86225, lng: -43.45311 },
      { lat: -22.86226, lng: -43.45292 },
      { lat: -22.8623, lng: -43.45262 },
      { lat: -22.86237, lng: -43.45237 },
      { lat: -22.86239, lng: -43.45227 },
      { lat: -22.86246, lng: -43.45215 },
      { lat: -22.86261, lng: -43.45184 },
      { lat: -22.86264, lng: -43.45178 },
      { lat: -22.86262, lng: -43.45169 },
      { lat: -22.86256, lng: -43.45165 },
      { lat: -22.86248, lng: -43.45166 },
      { lat: -22.86244, lng: -43.45169 },
      { lat: -22.86202, lng: -43.45191 },
      { lat: -22.86019, lng: -43.45286 },
      { lat: -22.857153, lng: -43.454408 },
      { lat: -22.85715, lng: -43.45441 },
      { lat: -22.85617, lng: -43.45494 },
      { lat: -22.855868, lng: -43.455191 },
      { lat: -22.85569, lng: -43.45533 },
      { lat: -22.85542, lng: -43.45563 },
      { lat: -22.85512, lng: -43.45601 },
      { lat: -22.85487, lng: -43.45628 },
      { lat: -22.85458, lng: -43.45654 },
      { lat: -22.853748, lng: -43.457231 },
      { lat: -22.85296, lng: -43.45787 },
      { lat: -22.8524, lng: -43.45819 },
      { lat: -22.85192, lng: -43.45843 },
      { lat: -22.85155, lng: -43.45858 },
      { lat: -22.85123, lng: -43.45863 },
      { lat: -22.85085, lng: -43.45863 },
      { lat: -22.85059, lng: -43.45856 },
      { lat: -22.8506, lng: -43.45856 },
      { lat: -22.85, lng: -43.45841 },
      { lat: -22.84969, lng: -43.45836 },
      { lat: -22.84964, lng: -43.45838 },
      { lat: -22.84953, lng: -43.45851 },
      { lat: -22.849973, lng: -43.458953 },
      { lat: -22.84998, lng: -43.45896 },
      { lat: -22.85026, lng: -43.45924 },
      { lat: -22.85027, lng: -43.45924 },
      { lat: -22.850997, lng: -43.459937 },
      { lat: -22.851, lng: -43.45994 },
      { lat: -22.8524, lng: -43.46126 },
      { lat: -22.85361, lng: -43.46239 },
      { lat: -22.85369, lng: -43.46254 },
      { lat: -22.85375, lng: -43.4627 },
      { lat: -22.85356, lng: -43.4629 },
      { lat: -22.85275, lng: -43.46327 },
      { lat: -22.85196, lng: -43.46364 },
      { lat: -22.8495, lng: -43.46481 },
      { lat: -22.84544, lng: -43.46673 },
      { lat: -22.84468, lng: -43.46707 },
      { lat: -22.84347, lng: -43.4676 },
    ],
    [
      { lat: -22.91698, lng: -43.18829 },
      { lat: -22.91518, lng: -43.18825 },
      { lat: -22.91507, lng: -43.18814 },
      { lat: -22.91504, lng: -43.18803 },
      { lat: -22.91495, lng: -43.18713 },
      { lat: -22.91494, lng: -43.18588 },
      { lat: -22.91482, lng: -43.18545 },
      { lat: -22.91446, lng: -43.18425 },
      { lat: -22.91442, lng: -43.18394 },
      { lat: -22.91441, lng: -43.18366 },
      { lat: -22.91438, lng: -43.18337 },
      { lat: -22.91435, lng: -43.18322 },
      { lat: -22.91397, lng: -43.18189 },
      { lat: -22.91371, lng: -43.18106 },
      { lat: -22.91348, lng: -43.18034 },
      { lat: -22.91347, lng: -43.18016 },
      { lat: -22.91351, lng: -43.17979 },
      { lat: -22.91361, lng: -43.17922 },
      { lat: -22.91372, lng: -43.17877 },
      { lat: -22.91375, lng: -43.17872 },
      { lat: -22.91436, lng: -43.17813 },
      { lat: -22.91438, lng: -43.17803 },
      { lat: -22.91435, lng: -43.17795 },
      { lat: -22.91418, lng: -43.17787 },
      { lat: -22.914, lng: -43.17787 },
      { lat: -22.91377, lng: -43.17785 },
      { lat: -22.91369, lng: -43.17781 },
      { lat: -22.91359, lng: -43.17776 },
      { lat: -22.91316, lng: -43.17739 },
      { lat: -22.91237, lng: -43.17669 },
      { lat: -22.91231, lng: -43.1766 },
      { lat: -22.91229, lng: -43.17648 },
      { lat: -22.91214, lng: -43.17617 },
      { lat: -22.91193, lng: -43.17581 },
      { lat: -22.91146, lng: -43.17528 },
      { lat: -22.91099, lng: -43.17446 },
      { lat: -22.91093, lng: -43.1744 },
      { lat: -22.91087, lng: -43.17429 },
      { lat: -22.91055, lng: -43.17376 },
      { lat: -22.90985, lng: -43.1727 },
      { lat: -22.90967, lng: -43.17239 },
      { lat: -22.90961, lng: -43.17231 },
      { lat: -22.90955, lng: -43.17225 },
      { lat: -22.90931, lng: -43.17208 },
      { lat: -22.90901, lng: -43.1722 },
      { lat: -22.90856, lng: -43.17234 },
      { lat: -22.90826, lng: -43.17244 },
      { lat: -22.90656, lng: -43.17306 },
      { lat: -22.90597, lng: -43.17329 },
      { lat: -22.90574, lng: -43.17343 },
      { lat: -22.90526, lng: -43.17378 },
      { lat: -22.905259, lng: -43.173781 },
      { lat: -22.9045, lng: -43.17434 },
      { lat: -22.90406, lng: -43.17459 },
      { lat: -22.90272, lng: -43.17561 },
      { lat: -22.9024, lng: -43.17586 },
      { lat: -22.90174, lng: -43.17629 },
      { lat: -22.90135, lng: -43.17649 },
      { lat: -22.9008, lng: -43.17673 },
      { lat: -22.90052, lng: -43.17683 },
      { lat: -22.90047, lng: -43.17693 },
      { lat: -22.90043, lng: -43.17712 },
      { lat: -22.90048, lng: -43.17755 },
      { lat: -22.90053, lng: -43.17771 },
      { lat: -22.90054, lng: -43.17771 },
      { lat: -22.90073, lng: -43.17827 },
      { lat: -22.90101, lng: -43.1789 },
      { lat: -22.90113, lng: -43.1792 },
      { lat: -22.90121, lng: -43.17924 },
      { lat: -22.90128, lng: -43.17934 },
      { lat: -22.9013, lng: -43.1794 },
      { lat: -22.902178, lng: -43.182134 },
      { lat: -22.90218, lng: -43.18214 },
      { lat: -22.90285, lng: -43.18421 },
      { lat: -22.90301, lng: -43.18522 },
      { lat: -22.90391, lng: -43.18803 },
      { lat: -22.90455, lng: -43.19 },
      { lat: -22.90451, lng: -43.19023 },
      { lat: -22.90446, lng: -43.19034 },
      { lat: -22.90436, lng: -43.19041 },
      { lat: -22.90419, lng: -43.19043 },
      { lat: -22.90412, lng: -43.1905 },
      { lat: -22.90384, lng: -43.19056 },
      { lat: -22.90358, lng: -43.19065 },
      { lat: -22.9031, lng: -43.1909 },
    ],
  ];
  const [map, setMap] = useState<google.maps.Map | null>(null);
  const { setup, setLocationToCurrent, addRecentralizeButton, drawPaths } =
    mapController();

  const handlePathClick = (event: google.maps.MapMouseEvent) => {
    if (event.latLng) {
      const clickedLatLng = event.latLng;
      console.log('Coordinates:', clickedLatLng.toString());
      // Run your custom code here with the clickedLatLng coordinates
    }
  };

  useEffect(() => {
    if (ref.current && !map) {
      setMap(setup(ref.current));
    }
    if (map) {
      setLocationToCurrent(map);
      addRecentralizeButton(map);
      drawPaths(map, paths, handlePathClick);
    }
  }, [map]);

  return map;
};
